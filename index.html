<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhoto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"> 
    <link rel="stylesheet" href="./style.css"> 
</head>
<body>

  <div class="container-fluid main-page">
    <header class="header">
      <div class="btn-group" role="group" aria-label="Меню">
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            Файл
          </button>
          <ul class="dropdown-menu">
            <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#importModal">Загрузить</button></li>
            <li><button class="dropdown-item" type="button" id="saveBtn">Сохранить</button></li>
          </ul>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            Изображение
          </button>
          <ul class="dropdown-menu">
            <li><button id="resizeBtn" class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#resizeModal">Изменить размер</button></li>
          </ul>
        </div>
        <button type="button" class="btn btn-light" id="curvesBtn" data-bs-toggle="modal" data-bs-target="#curvesModal">Кривые</button>
        <button type="button" class="btn btn-light" id="filterBtn" data-bs-toggle="modal" data-bs-target="#filterModal">Фильтры</button>
      </div>
    </header>
    
    <div class="container-fluid mb-3">
      <div class="row">
          <div class="col-10 canvas-container">
            <div class="scroll-container">
                <canvas id="imageCanvas"></canvas>
            </div>
        </div>
        <div class="sidebar col-2 justify-content-center ">
          <canvas id="thumbnailCanvas"></canvas>
          <p class="properties">Свойства:</p>
          <li class="img-color">
            <div>Цвет (rgb): </div>
            <div id="colorMini"></div>
            <div id="colorInfo"></div>
          </li>
          <li class="img-coordinates">
            <div class="side-panel-item" id="positionInfo">XY: </div>
          </li>
          <li class="img-size">
            <div class="side-panel-item" id="imageSizeInfo">Размер: </div>
          </li>
          <select class="form-select mt-1" id="scaleSelect" aria-label="select example">
              <option value="0.12">12%</option>
              <option value="0.25">25%</option>
              <option value="0.5">50%</option>
              <option value="0.75">75%</option>
              <option value="1" selected="selected">100%</option>
              <option value="1.5">150%</option>
              <option value="2">200%</option>
              <option value="3">300%</option>
          </select>
          <div class="sidebar-tools">
            <button class="sidebar-tool" id="handTool" title="Move image with mouse or arrow keys">
              <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
              <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 3C13.2239 3 13 3.22386 13 3.5V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V5.5C11 5.22386 10.7761 5 10.5 5C10.2239 5 9.99999 5.22386 9.99999 5.5V13.9677C9.99999 15.0757 8.62655 15.5918 7.8969 14.7579L5.34951 11.8466C5.19167 11.6662 4.95459 11.576 4.71675 11.6057C4.15329 11.6761 3.88804 12.3395 4.24762 12.779L8.93807 18.5118C10.2266 20.0867 12.154 21 14.1888 21C17.3982 21 20 18.3982 20 15.1888V7.5C20 7.22386 19.7761 7 19.5 7C19.2239 7 19 7.22386 19 7.5V12C19 12.5523 18.5523 13 18 13C17.4477 13 17 12.5523 17 12V5.5C17 5.22386 16.7761 5 16.5 5C16.2239 5 16 5.22386 16 5.5V12C16 12.5523 15.5523 13 15 13C14.4477 13 14 12.5523 14 12V3.5C14 3.22386 13.7761 3 13.5 3ZM15.9611 3.05823C15.7525 1.88823 14.73 1 13.5 1C12.27 1 11.2475 1.88823 11.0389 3.05823C10.8653 3.0201 10.685 3 10.5 3C9.11928 3 7.99999 4.11929 7.99999 5.5V11.8386L6.85467 10.5296C6.2595 9.84942 5.36551 9.50903 4.46868 9.62113C2.34401 9.88672 1.34381 12.3883 2.6997 14.0455L7.39016 19.7783C9.05854 21.8174 11.5541 23 14.1888 23C18.5028 23 22 19.5028 22 15.1888V7.5C22 6.11929 20.8807 5 19.5 5C19.315 5 19.1347 5.0201 18.9611 5.05823C18.7525 3.88823 17.73 3 16.5 3C16.315 3 16.1347 3.0201 15.9611 3.05823Z" fill="#0F0F0F"/>
              </svg>
            </button>
            <button class="sidebar-tool" id="eyedropperTool" title="Select colors from the image">
              <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
              <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.36828 4.36828C2.39197 5.34459 2.39197 6.9275 3.36828 7.90381L6.55026 11.0858L4.42894 13.2071C4.03842 13.5976 4.03842 14.2308 4.42894 14.6213C4.81946 15.0119 5.45263 15.0119 5.84315 14.6213L7.25737 13.2071L13.2678 19.2175C13.7296 19.6793 14.4176 19.7771 14.9752 19.5107L16.0962 20.6317C17.0725 21.608 18.6554 21.608 19.6317 20.6317C20.608 19.6554 20.608 18.0725 19.6317 17.0962L18.5107 15.9752C18.7771 15.4176 18.6793 14.7296 18.2175 14.2678L12.2071 8.25737L13.6213 6.84315C14.0119 6.45263 14.0119 5.81946 13.6213 5.42894C13.2308 5.03842 12.5976 5.03842 12.2071 5.42894L10.0858 7.55026L6.90381 4.36828C5.9275 3.39197 4.34459 3.39197 3.36828 4.36828ZM10.7929 9.67158L8.67158 11.7929L14.3888 17.5101C14.9464 17.2438 15.6344 17.3415 16.0962 17.8033L17.5104 19.2175C17.7057 19.4128 18.0223 19.4128 18.2175 19.2175C18.4128 19.0223 18.4128 18.7057 18.2175 18.5104L16.8033 17.0962C16.3415 16.6344 16.2438 15.9464 16.5101 15.3888L10.7929 9.67158Z" fill="#000000"/>
              </svg>
            </button>

              <div id="eyedropper-panel">
                <div class="eyedropper-color-info">
                    <div class="eyedropper-color-item">
                      <div class="color-chosen">
                        <p class="eyedropper-title">Цвет №1</p>
                        <div class="swatch" id="eyedropper-swatch-1"></div>
                      </div>
                        <div id="eyedropper-color-1-rgb"></div>
                        <div id="eyedropper-color-1-xyz"></div>
                        <div id="eyedropper-color-1-lab"></div>
                        <div id="eyedropper-position-info-1">Координаты: </div>
                    </div>
                    <div class="eyedropper-color-item">
                      <div class="color-chosen">
                        <p class="eyedropper-title">Цвет №2</p>
                        <div class="swatch" id="eyedropper-swatch-2"></div>
                      </div>
                        <div id="eyedropper-color-2-rgb"></div>
                        <div id="eyedropper-color-2-xyz"></div>
                        <div id="eyedropper-color-2-lab"></div>
                        <div id="eyedropper-position-info-2">Координаты: </div>
                    </div>
                </div>
                <p id="eyedropper-contrast-info">Контрастность: </p>
            </div>
          </div>
        </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="importModalLabel">Загрузка изображения</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
        </div>
        <div class="modal-body">
          <form id="importForm">
            <div class="mb-4">
              <label for="fileInput" class="form-label">Выберите изображение с компьютера</label>
              <input type="file" class="form-control" id="fileInput" aria-describedby="emailHelp">
              <div id="fileHelp" class="form-text">Поддерживаются форматы JPG и PNG</div>
            </div>
            <div class="mb-4 ">
              <div class="position-absolute start-50 translate-middle">
                <p>ИЛИ</p>
              </div>
              <label for="urlInput" class="form-label">Введите URL</label>
              <input type="text" class="form-control" id="urlInput">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
          <button type="submit" class="btn btn-primary" form="importForm" data-bs-dismiss="modal" id="uploadBtn">Сохранить</button>
        </div>
      </div>
    </div>
    </div>

    <div class="modal fade" id="resizeModal" tabindex="-1" aria-labelledby="resizeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="resizeModalLabel">Изменить размеры изображения</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
          </div>
          <div class="modal-body">
            <form id="resizeForm">
              <div id="originalSize" class="form-text mb-4">
                <div>Исходный размер <span id="originalPixelCount"></span> Мп</div>
                <div>Итоговый размер <span id="resizedPixelCount"></span> Мп</div>
              </div>
              <div class="mb-4 row g-3">
                <div class="col-3">
                  <label for="resizeUnitsSelect" class="form-label">Единицы измерения</label>
                </div>
                <div class="col-3">
                  <select class="form-select mt-1 col-3" id="resizeUnitsSelect" aria-label="resize units select">
                    <option value="pixels">px</option>
                    <option value="percents">%</option>
                  </select>
                </div>
              </div>
              <div class="mb-4 row g-3 align-items-baseline">
                <div class="col-3">
                  <label for="heightInput" class="form-label col-auto">Высота</label>
                </div>
                <div class="col-auto">
                  <input type="text" class="form-control col-auto" id="newHeightInput">
                </div>
              </div>
              <div class="mb-2 row g-3 align-items-baseline">
                <div class="col-3">
                  <label for="widthInput" class="form-label">Ширина</label>
                </div>
                <div class="col-auto">
                  <input type="text" class="form-control" id="newWidthInput">
                </div>
              </div>
              <div class="mb-4 row g-3 align-items-baseline">
                <div class="col-auto">
                  <input type="checkbox" class="form-check-input" id="proportionsCheckbox">
                </div>
                <div class="col-auto">
                  <label for="proportionsCheckbox" class="form-label">С сохранением пропорций</label>
                </div>
              </div>
              <div class="mb-4">
                <label for="resizeMethodsSelect" class="form-label">Способ масштабирования
                  <a class="tooltip-toggle" data-toggle="tooltip" title="Масштабирование по принципу ближайшего соседа - это метод изменения размера изображения, при котором каждый пиксель в новом изображении заполняется значениями пикселей из исходного изображения, находящихся ближе всего к центру нового пикселя. Этот метод является одним из простейших методов интерполяции.">
                    <svg viewBox="0 0 16 16" version="1.1" x="0px" y="0px" width="16px" height="16px">
                      <path d="M8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 Z M7.08229167,9.96549479 L8.75807292,9.96549479 C8.76588546,9.66861831 8.80690067,9.42350357 8.88111979,9.23014323 C8.95533891,9.03678289 9.08815008,8.84830821 9.27955729,8.66471354 L9.95338542,8.03776042 C10.2385431,7.76041528 10.4455723,7.48893362 10.5744792,7.22330729 C10.7033861,6.95768096 10.7678385,6.66276204 10.7678385,6.33854167 C10.7678385,5.59635046 10.5285831,5.02409055 10.0500651,4.62174479 C9.57154709,4.21939903 8.89674915,4.01822917 8.02565104,4.01822917 C7.15064667,4.01822917 6.47096596,4.23600043 5.98658854,4.67154948 C5.50221112,5.10709853 5.25611983,5.71549089 5.24830729,6.49674479 L7.22877604,6.49674479 C7.23658858,6.20377458 7.31275969,5.97135503 7.45729167,5.79947917 C7.60182364,5.62760331 7.79127487,5.54166667 8.02565104,5.54166667 C8.53346608,5.54166667 8.78736979,5.83658559 8.78736979,6.42643229 C8.78736979,6.668621 8.71217523,6.89029847 8.56178385,7.09147135 C8.41139248,7.29264424 8.19166811,7.51432171 7.90260417,7.75651042 C7.61354022,7.99869913 7.40455794,8.28482908 7.27565104,8.61490885 C7.14674415,8.94498863 7.08229167,9.39517944 7.08229167,9.96549479 Z M6.84205729,11.7467448 C6.84205729,12.0358087 6.94654843,12.2731111 7.15553385,12.4586589 C7.36451927,12.6442067 7.62525885,12.7369792 7.93776042,12.7369792 C8.25026198,12.7369792 8.51100156,12.6442067 8.71998698,12.4586589 C8.9289724,12.2731111 9.03346354,12.0358087 9.03346354,11.7467448 C9.03346354,11.4576808 8.9289724,11.2203785 8.71998698,11.0348307 C8.51100156,10.8492829 8.25026198,10.7565104 7.93776042,10.7565104 C7.62525885,10.7565104 7.36451927,10.8492829 7.15553385,11.0348307 C6.94654843,11.2203785 6.84205729,11.4576808 6.84205729,11.7467448 Z"/>
                    </svg>
                  </a>
                </label>
                <select class="form-select mt-1" id="resizeMethodsSelect" aria-label="resize methods select">
                  <option value="nearest-neighbor">Ближайший сосед</option>
                  <option value="bilinear" disabled>Билинейное</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
            <button type="submit" class="btn btn-primary" form="resizeForm" data-bs-dismiss="modal" id="confirmResizeBtn">Изменить</button>
          </div>
        </div>
      </div>
      </div>

      <div class="modal fade" id="curvesModal" tabindex="-1" aria-labelledby="curvesModalLabel" aria-hidden="true" data-bs-backdrop="false">
        <div class="modal-dialog modal-dialog-right">
          <div class="modal-content modal-shadow">
            <div class="modal-header">
              <h5 class="modal-title" id="importModalLabel">Кривые</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
            </div>
            <div class="modal-body">
              <form id="importForm">
                <div class="mb-4">
                  <label for="fileInput" class="form-label">Введите значения:</label>
                  <div class="curves-input row align-items-center">
                    <label for="point1-input">Точка 1:</label>
                    <input type="number" class="form-control point-input" id="point1-input-in" value="0" min="0" max="255"> →
                    <input type="number" class="form-control point-input" id="point1-input-out" value="0" min="0" max="255">
                </div>
                <div class="curves-input row align-items-center">
                    <label for="point2-input">Точка 2:</label>
                    <input type="number" class="form-control point-input" id="point2-input-in" value="255" min="0" max="255"> →
                    <input type="number" class="form-control point-input" id="point2-input-out" value="255" min="0" max="255">
                </div>
                <div>
                    <input type="checkbox" class="form-check-input mr-5" id="previewСheckbox">
                    <label for="proportionsCheckbox" class="form-label">Предварительный просмотр</label>
                </div>
                <svg id="curves-graph" width="300" height="300" viewBox="0 0 255 255" style="border: 1px solid black;">
                    <polyline id="curve-line" points="" fill="blue" stroke="blue" stroke-width="2"/>
                    <circle id="point1-circle" cx="0" cy="255" r="5" fill="red"/>
                    <circle id="point2-circle" cx="255" cy="0" r="5" fill="red"/>
                </svg>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="resetСurves">Сбросить</button>
              <button type="submit" class="btn btn-primary" form="importForm" data-bs-dismiss="modal" id="applyСurves">Преобразовать</button>
            </div>
          </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="filterModalLabel" aria-hidden="true" data-bs-backdrop="false">
        <div class="modal-dialog modal-dialog-right">
          <div class="modal-content modal-shadow">
            <div class="modal-header">
              <h5 class="modal-title" id="filterModalLabel">Настройки фильтров</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
            </div>
            <div class="modal-body">
              <form id="importForm">
                <div class="mb-4">
                  <label for="fileInput" class="form-label">Предустановка:</label>
                  <select class="form-select mt-1 col-12" id="filterSelect" aria-label="filter presets">
                    <option value="identity">Оригинал</option>
                    <option value="sharpen">Резкость</option>
                    <option value="gaussian">Размытие по Гауссу</option>
                    <option value="box">Прямоугольное размытие</option>
                  </select>
                  <div class="container matrix-grid-wrapper">
                    <div class="row">
                      <div class="col-4">
                        <input type="number" id="m00" class="form-control matrix" value="0">
                      </div>
                      <div class="col-4">
                        <input type="number" id="m01" class="form-control matrix" value="0">
                      </div>
                      <div class="col-4">
                        <input type="number" id="m02" class="form-control matrix" value="0">
                      </div>
                    </div>
                    
                    <div class="row">
                      <div class="col-4">
                        <input type="number" id="m10" class="form-control matrix" value="0">
                      </div>
                      <div class="col-4">
                        <input type="number" id="m11" class="form-control matrix" value="1">
                      </div>
                      <div class="col-4">
                        <input type="number" id="m12" class="form-control matrix" value="0">
                      </div>
                    </div>
                    
                    <div class="row">
                      <div class="col-4">
                        <input type="number" id="m20" class="form-control matrix" value="0">
                      </div>
                      <div class="col-4">
                        <input type="number" id="m21" class="form-control matrix" value="0">
                      </div>
                      <div class="col-4">
                        <input type="number" id="m22" class="form-control matrix" value="0">
                      </div>
                    </div>
                  </div>
                <div>
                    <input type="checkbox" class="form-check-input mr-5" id="previewCheck">
                    <label for="proportionsCheckbox" class="form-label">Предварительный просмотр</label>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="resetFilter">Сбросить</button>
              <button type="submit" class="btn btn-primary" form="filterForm" data-bs-dismiss="modal" id="applyFilter">Преобразовать</button>
            </div>
          </div>
        </div>
    </div>
</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="./script.js"></script>
</body>
</html>